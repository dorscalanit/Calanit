<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>×›×œ× ×™×ª | ×”×‘×™×ª ×©×œ×š ×œ×§×¨×™×™×¨×”</title>
    <!-- Fonts & Styles -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@400;500;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: 'Heebo', sans-serif; scroll-behavior: smooth; }
        .brand-logo { font-weight: 900; font-size: 1.8rem; }
        .hero-gradient { background: linear-gradient(135deg, rgba(59,130,246,1) 0%, rgba(37,99,235,1) 100%); }
        .swiper-pagination-progressbar .swiper-pagination-progressbar-fill { background: #fff !important; }
        .swiper-button-next, .swiper-button-prev { color: white; background-color: rgba(0, 0, 0, 0.3); width: 50px; height: 50px; border-radius: 50%;}
        .swiper-button-next::after, .swiper-button-prev::after { font-size: 20px; }
        .animated-section { opacity: 0; transform: translateY(40px); transition: opacity 0.8s ease-out, transform 0.8s ease-out; }
        .animated-section.is-visible { opacity: 1; transform: translateY(0); }
    </style>
</head>
<body class="bg-gray-50">

    <!-- Header Placeholder (menu.html) -->
    <header id="header-placeholder" class="bg-white/80 backdrop-blur-md shadow-sm sticky top-0 z-50"></header>

    <main>
        <!-- Hero + ×—×™×¤×•×© -->
        <section class="hero-gradient text-white">
            <div class="container mx-auto px-6 py-24 text-center">
                <h1 class="text-4xl md:text-6xl font-black mb-4 drop-shadow-lg">×”×¦×¢×“ ×”×‘× ×‘×§×¨×™×™×¨×” ×©×œ×š ××ª×—×™×œ ×›××Ÿ</h1>
                <p class="text-lg md:text-xl mb-12 max-w-3xl mx-auto">×›×œ× ×™×ª ××—×‘×¨×ª ×‘×™×Ÿ ×”×›×™×©×¨×•×Ÿ ×©×œ×š ×œ××©×¨×•×ª ×”××•×‘×™×œ×•×ª ×‘××©×§. ×‘×•××• × ××¦× ×™×—×“ ××ª ×”×”×–×“×× ×•×ª ×”×‘××” ×©×œ×›×.</p>
                <div class="max-w-4xl mx-auto bg-white/20 backdrop-blur-sm p-4 rounded-xl shadow-2xl">
                    <form action="jobs.html" class="grid grid-cols-1 md:grid-cols-4 gap-3 items-center">
                        <input type="text" placeholder="×—×™×¤×•×© ×œ×¤×™ ×ª×¤×§×™×“, ×—×‘×¨×”..." class="md:col-span-2 w-full px-4 py-3 rounded-lg text-gray-800 focus:outline-none focus:ring-4 focus:ring-blue-300 transition">
                        <select class="w-full px-4 py-3 rounded-lg text-gray-500 focus:outline-none focus:ring-4 focus:ring-blue-300 transition">
                            <option>×›×œ ×”×ª×—×•××™×</option>
                        </select>
                        <select class="w-full px-4 py-3 rounded-lg text-gray-500 focus:outline-none focus:ring-4 focus:ring-blue-300 transition">
                            <option>×›×œ ×”××–×•×¨×™×</option>
                        </select>
                        <button type="submit" class="md:col-span-4 w-full bg-white text-blue-600 font-bold px-8 py-3 rounded-lg hover:bg-blue-100 transition duration-300 text-lg shadow-md hover:shadow-lg">
                            <i class="fas fa-search"></i> ×—×™×¤×•×© ××©×¨×•×ª
                        </button>
                    </form>
                </div>
            </div>
        </section>

        <!-- ××©×¨×•×ª ×—××•×ª -->
        <section class="py-20 animated-section">
            <div class="container mx-auto px-6">
                <h2 class="text-3xl md:text-4xl font-bold text-center mb-4 text-gray-800">××©×¨×•×ª ×—××•×ª ğŸ”¥</h2>
                <p class="text-center text-gray-600 mb-12 text-lg">×”×–×“×× ×•×™×•×ª ×©××¡×•×¨ ×œ×š ×œ×¤×¡×¤×¡, ××ª×¢×“×›× ×•×ª ×›×œ ×”×–××Ÿ.</p>
                <div class="relative">
                    <div class="swiper job-stories-slider h-[500px] rounded-2xl shadow-2xl bg-white">
                        <div class="swiper-wrapper">
                            <!-- Slides will be populated dynamically by JS -->
                        </div>
                        <div class="swiper-pagination swiper-pagination-progressbar swiper-pagination-horizontal"></div>
                    </div>
                    <div class="swiper-button-next"></div>
                    <div class="swiper-button-prev"></div>
                </div>
            </div>
        </section>

        <!-- ×§×¨×™××” ×œ×¤×¢×•×œ×” - ×©×œ×— ×§×•"×— -->
        <section class="bg-white py-20 animated-section">
            <div class="container mx-auto px-6 text-center">
                <i class="fas fa-file-signature text-5xl text-blue-500 mb-4"></i>
                <h2 class="text-3xl md:text-4xl font-bold text-gray-800 mb-4">×œ× ××¦××ª ××ª ××” ×©×—×™×¤×©×ª?</h2>
                <p class="text-lg text-gray-600 max-w-2xl mx-auto mb-8">××œ ×“××’×”. ×××’×¨ ×”××©×¨×•×ª ×©×œ× ×• ×“×™× ××™ ×•××ª×¢×“×›×Ÿ ×™×•×-×™×•×. ×©×œ×—/×™ ×œ× ×• ××ª ×§×•×¨×•×ª ×”×—×™×™× ×•×”×¦×•×•×ª ×©×œ× ×• ×™××¦× ×¢×‘×•×¨×š ××ª ×”×”×–×“×× ×•×ª ×”×‘××”.</p>
                <a href="apply.html" class="bg-blue-600 text-white font-bold px-10 py-4 rounded-full hover:bg-blue-700 transition-all duration-300 shadow-lg hover:shadow-xl text-xl">
                    <i class="fas fa-paper-plane mr-2"></i> ×©×œ×™×—×ª ×§×•×¨×•×ª ×—×™×™×
                </a>
            </div>
        </section>
        <!-- ××¤×©×¨ ×œ×”×•×¡×™×£ ×¢×•×“ ×¡×§×©× ×™× ×›××Ÿ -->
    </main>
    
    <!-- Footer Placeholder (footer.html) -->
    <footer id="footer-placeholder" class="bg-gray-800 text-white"></footer>

    <!-- Firebase + Swiper + Components Loader -->
    <script type="module">
        // Firebase
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-app.js";
        import { getFirestore, collection, query, where, orderBy, limit, getDocs } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-firestore.js";

        // ×”×’×“×¨×•×ª ×¤×™×™×¨×‘×™×™×¡ - ×œ×¢×“×›×Ÿ ×× ×¦×¨×™×š
        const firebaseConfig = {
            apiKey: "AIzaSyAOKMJabnJ9JGE5CuclCCSjv5Bo3rT49Cw",
            authDomain: "calanit-31a32.firebaseapp.com",
            projectId: "calanit-31a32",
            storageBucket: "calanit-31a32.appspot.com",
            messagingSenderId: "91430351613",
            appId: "1:91430351613:web:ae46b2063f2d4b71428494",
        };
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // ×˜×•×¢×Ÿ header & footer ×Ö¾HTML × ×¤×¨×“×™×
        function loadComponent(url, elementId, callback) {
            fetch(url)
                .then(response => {
                    if (!response.ok) throw new Error('Network response was not ok');
                    return response.text();
                })
                .then(data => {
                    document.getElementById(elementId).innerHTML = data;
                    if (callback) callback();
                })
                .catch(error => console.error(`Error loading component from ${url}:`, error));
        }
        loadComponent('menu.html', 'header-placeholder', () => {
            // ×ª×¤×¨×™×˜ ××•×‘×™×™×œ - ×”×’×“×¨×” ××”×™×¨×”
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            if (mobileMenuButton && mobileMenu) {
                mobileMenuButton.addEventListener('click', () => {
                    mobileMenu.classList.toggle('hidden');
                });
            }
        });
        loadComponent('footer.html', 'footer-placeholder');

        // ===== ××©×¨×•×ª ×—××•×ª - ×˜×¢×™× ×” ×“×™× ××™×ª ×Ö¾Firestore =====
        async function loadHotJobs() {
            const swiperWrapper = document.querySelector('.job-stories-slider .swiper-wrapper');
            if (!swiperWrapper) return;
            swiperWrapper.innerHTML = '<div class="flex justify-center items-center w-full h-60 text-blue-600 text-lg">×˜×•×¢×Ÿ ××©×¨×•×ª...</div>';
            const q = query(
                collection(db, "jobs"),
                where("isHot", "==", true),
                orderBy("createdAt", "desc"),
                limit(10)
            );
            const snapshot = await getDocs(q);
            if (snapshot.empty) {
                swiperWrapper.innerHTML = `
                    <div class="swiper-slide flex flex-col justify-center items-center h-full bg-gray-100 rounded-2xl">
                        <i class="fas fa-fire text-5xl text-red-400 mb-2"></i>
                        <div class="text-lg font-bold text-gray-800">××™×Ÿ ×›×¨×’×¢ ××©×¨×•×ª ×—××•×ª</div>
                        <div class="text-gray-500 text-sm mt-2">× ×¡×” ×©×•×‘ ×××•×—×¨ ×™×•×ª×¨ ××• ×¢×™×™×Ÿ ×‘×›×œ ×”××©×¨×•×ª</div>
                    </div>
                `;
                return;
            }
            swiperWrapper.innerHTML = '';
            snapshot.forEach(doc => {
                const job = doc.data();
                const jobId = doc.id;
                const slide = document.createElement('div');
                slide.className = 'swiper-slide bg-white rounded-2xl shadow-lg flex flex-col justify-between items-start p-6 h-full relative';
                slide.innerHTML = `
                    <div>
                        <div class="text-blue-600 font-bold text-xl mb-2 flex items-center gap-2"><i class="fas fa-fire text-red-400"></i> ${job.title}</div>
                        <div class="text-gray-600 mb-2 text-base">${job.location || ''} â€¢ ${job.type || ''}</div>
                        <div class="text-gray-700 mb-4 line-clamp-3">${job.description ? job.description.substring(0, 160) : ''}${job.description && job.description.length > 160 ? '...' : ''}</div>
                    </div>
                    <a href="apply.html?job=${encodeURIComponent(jobId)}"
                       class="absolute bottom-6 left-6 bg-blue-600 text-white px-5 py-2 rounded-full font-bold shadow-lg hover:bg-blue-700 transition-all text-base">
                        <i class="fas fa-paper-plane ml-2"></i> ×©×œ×—/×™ ×§×•"×— ×œ××©×¨×” ×–×•
                    </a>
                `;
                swiperWrapper.appendChild(slide);
            });
            if (window.hotJobsSwiper) {
                window.hotJobsSwiper.update();
            }
        }

        // ===== ×× ×™××¦×™×” ×•-Swiper =====
        document.addEventListener('DOMContentLoaded', function() {
            // ×× ×™××¦×™×•×ª ×¡×§×©× ×™×
            const animatedSections = document.querySelectorAll('.animated-section');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('is-visible');
                    }
                });
            }, { threshold: 0.1 });
            animatedSections.forEach(section => observer.observe(section));
            // ×˜×¢×™× ×ª ××©×¨×•×ª ×—××•×ª + Swiper
            loadHotJobs().then(() => {
                window.hotJobsSwiper = new Swiper('.job-stories-slider', {
                    slidesPerView: 1,
                    spaceBetween: 40,
                    loop: false,
                    pagination: { el: '.swiper-pagination', type: 'progressbar' },
                    navigation: { nextEl: '.swiper-button-next', prevEl: '.swiper-button-prev' },
                    breakpoints: { 640: { slidesPerView: 1.2 }, 900: { slidesPerView: 2 }, 1200: { slidesPerView: 2.5 } }
                });
            });
        });
    </script>
    <!-- Swiper Script -->
    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
</body>
</html>